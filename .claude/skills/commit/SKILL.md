---
name: commit
description: 変更を意味のある単位でコミットします。
argument-hint: [-b <base-branch>]
model: sonnet
context: fork
---

# コミット作成

変更内容を意味のある単位で複数のコミットに分割してください。

## 1. 引数のパース

引数は以下のオプションを受け付けます:

- `-b <base-branch>`: ベースブランチを指定

## 2. ブランチのチェック

1. 現在のブランチ名を取得:

```bash
git branch --show-current
```

2. 現在のブランチ名が該当するか確認する

- `main` の場合
- `production` の場合
- `-b` で指定されたブランチと同名の場合

いずれかに該当する場合は下記手順を実行する

1. 適切なブランチ名を検討する
2. `git checkout -b <ブランチ名>` でブランチを作成する

## 3. 現在の状態確認

```bash
git status
```

## 4. コミット戦略

- ステージング済み・未ステージングにかかわらず、すべての変更を対象にコミットを提案すること
- 同一ファイルがステージング済みと未ステージングに分かれていても、そのファイルの変更は1つのコミットにまとめること
- 変更内容を意味のある単位で複数のコミットに分割すること
- 1つのコミットには1つの目的のみを含める
- コミットの粒度は、コミットメッセージがワンライン（1行）で記述できる範囲に留めること
  - ワンラインで説明しきれない変更は、さらに細かく分割する
- コミットメッセージは日本語で記述する

### 悪い例

```
fix: 複数の不具合を修正
```

### 良い例

```
:bug: ログイン画面でキーボードが閉じない問題を修正
:bug: ユーザー名表示時の文字化けを修正
```

## 5. ステージングの整理

コミットを実行する前に、既存のステージング状態を確認し、必要に応じて整理してください。

```bash
# 既にステージングされているファイルがある場合、一旦すべてアンステージする
git reset HEAD
```

意味のある粒度でコミットを分割するために、各コミットごとに必要なファイルのみをステージングしてください。

## 6. コミット実行

変更をステージングしてコミットしてください。各コミットは以下の手順で行います：

1. 対象ファイルをステージング: `git add <ファイル>`
2. コミット実行: `git commit -m "<メッセージ>"`
3. 次のコミットのために1-2を繰り返す

## 注意事項

- main,productionへは絶対に直接コミットせず、必ず別のブランチを作成してください
- コミットメッセージは必ず日本語で記述してください
- 関連性のない変更は別々のコミットに分けてください
